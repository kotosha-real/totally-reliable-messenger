# Базовый слой
FROM node:13

# Создаём рабочую папку
WORKDIR /usr/src/app

# Копируем всё что нужно из локальной папки в образ
COPY . .
COPY package-lock.json ./

# Устанавливаем зависимости, в образе появится /node_modules
RUN npm install

# Запускаем сборку
RUN npm run build

# При старте контейнер начнёт общаться через 80 порт
EXPOSE 80

# При старте контейнер выполнит эту команду – запустит наше приложение
CMD node server
